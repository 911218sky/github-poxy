{
  "enabled": true,
  "name": "Generate Commit Message",
  "description": "Analyzes git diff, groups changes by type, creates professional commits with emojis, and pushes to remote.",
  "version": "1",
  "when": {
    "type": "userTriggered"
  },
  "then": {
    "type": "askAgent",
    "prompt": "Analyze git changes and create professional, well-organized commits. Execute immediately without confirmation.\n\n## ğŸ“‹ Step 1: Analyze Changes\n\nRun `git diff` and `git status` to identify all changed files.\n\n## ğŸ·ï¸ Step 2: Group Files by Type\n\nCategorize files into logical groups based on their purpose:\n\n| Type | Emoji | Description | Example Files |\n|------|-------|-------------|---------------|\n| feat | âœ¨ | New feature | New routes, new functions |\n| fix | ğŸ› | Bug fix | Error corrections |\n| refactor | â™»ï¸ | Code restructure | Logic improvements |\n| docs | ğŸ“ | Documentation | README, comments |\n| style | ğŸ’„ | Formatting | Whitespace, styling |\n| perf | âš¡ | Performance | Optimizations |\n| test | âœ… | Tests | Test files |\n| chore | ğŸ”§ | Maintenance | Dependencies |\n| ci | ğŸ‘· | CI/CD | Workflows, hooks |\n| config | âš™ï¸ | Configuration | tsconfig, wrangler.toml |\n| security | ğŸ”’ | Security | Auth, permissions |\n| build | ğŸ“¦ | Build system | Package.json scripts |\n| revert | âª | Revert changes | Undo commits |\n| init | ğŸ‰ | Initial commit | Project setup |\n| ui | ğŸ¨ | UI changes | HTML, CSS |\n| types | ğŸ·ï¸ | Type definitions | Interfaces, types |\n| deps | â• | Add dependency | New packages |\n| deps | â– | Remove dependency | Remove packages |\n| breaking | ğŸ’¥ | Breaking change | API changes |\n\n## âœï¸ Step 3: Commit Message Format\n\n```\n<emoji> <type>(<scope>): <description>\n```\n\n### Rules:\n- First letter of description: **Uppercase**\n- Length: **Under 72 characters**\n- Mood: **Imperative** (Add, Fix, Update, not Added, Fixed, Updated)\n- No period at end\n- Scope: Infer from file path (e.g., `proxy`, `config`, `api`, `docs`)\n\n### Examples:\n```\nâœ¨ feat(proxy): Add new GHCR route handler\nğŸ› fix(api): Resolve CORS header missing issue\nâ™»ï¸ refactor(config): Migrate to TypeScript strict mode\nğŸ“ docs(readme): Update deployment instructions\nâš™ï¸ config(wrangler): Add custom domain settings\nğŸ‘· ci(hooks): Add auto commit message generator\nğŸ”§ chore(deps): Bump typescript to v5.3.0\nğŸ’„ style(html): Improve landing page layout\nâš¡ perf(proxy): Cache frequently accessed routes\nğŸ”’ security(auth): Add rate limiting support\n```\n\n## ğŸš€ Step 4: Execute Commits\n\nFor each logical group:\n1. `git add <file1> <file2> ...` (only related files)\n2. `git commit -m \"<emoji> <type>(<scope>): <description>\"`\n\n## ğŸ“¤ Step 5: Push to Remote\n\n1. Run `git push`\n2. If push fails, auto-fix:\n   - **Remote ahead**: `git pull --rebase` â†’ retry push\n   - **Conflicts**: Resolve â†’ `git rebase --continue` â†’ push\n   - **No upstream**: `git push -u origin <branch>`\n   - **Auth error**: Notify user to check credentials\n\n## ğŸ“Š Output\n\nAfter completion, show brief summary:\n```\nâœ… Committed & Pushed:\n   âœ¨ feat(proxy): Add new route handler\n   ğŸ“ docs(readme): Update usage examples\n   âš™ï¸ config(wrangler): Update compatibility date\n```"
  }
}
